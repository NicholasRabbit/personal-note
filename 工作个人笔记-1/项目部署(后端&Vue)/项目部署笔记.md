### 1，jar/war包项目独立部署

SpringBoot一般以jar包的形式部署，一个jar包相当于一个小项目，里面内嵌了tomcat

**1,把SpringBoot打成的jar包上传到指定目录，例如/opt/package**

  (1)在该目录下执行,以下方式shell窗口关闭项目也停止
  java -jar ruoyi-admin.jar >log.out:生成日志到当前目录下，tempLog.txt自动创建，端口使用： application.yml等文件中的设置 
  java -jar ruoyi-admin.jar  --server.port=9090 > log.out: 自定义端口，注意要在Linux防火墙设置9090例外，否则无法访问

  (2)后台继续运行项目写法：
  nohup java -jar ruoyi-admin.jar  --server.port=9090  >  log.out  &  tail -f log.out : 定义端口号，并在后台运行

**2,防火墙设置自定义的9090例外，否则外部无法访问**
firewall-cmd --zone=public --add-port=9090/tcp --permanent
firewall-cmd --reload    #重启firewall

**3，war包也可以按java -jar  xxx.war的命令部署**

### 2，war包部署到tomcat

- （工作中总结）
  首先把项目打包成war包
  执行命令
  cd /home/iot-seal/
  ./shutdown.sh  : 关闭tomcat
  ./start.sh  : 开启tomcat

- 打成的war包名就是项目访问的名，是ServletContext的path
    例如， ssm.war
    localhost:8080/ssm
- SSM项目中，如果使用Maven构建项目的话，在pom.xml文件中<plugin>--><path>标签规定项目访问路径

```xml
    <groupId>com.thinkgem.jeesite</groupId>
	<artifactId>jeesite</artifactId>
	<version>1.2.7</version>
	<packaging>war</packaging>
	<!-- tomcat7插件 -->
	<plugin>
		<groupId>org.apache.tomcat.maven</groupId>
		<artifactId>tomcat7-maven-plugin</artifactId>
		<version>${tomcat.version}</version> 
		<configuration>
			<port>${webserver.port}</port>
			<path>/${project.artifactId}</path>   
			<uriEncoding>${project.build.sourceEncoding}</uriEncoding>
		</configuration>
	</plugin>
```

### 3，增量替换项目中的单个文件

即不停止服务，使用java命令行替换项目中的单个变更的文件。

**经个人验证，本方法不适用于热部署，替换之后不起作用，因为JVM类加载器已经加载原来的class文件到内存中了，硬盘中改变 class文件不会自动加载。**

以替换web.war中的fileAdminFolderSelect.html文件为例。

1.  jar -tvf  web.war  :   查看war包下所有的文件

2. Ctrl + F(Windows)  或" !! | grep  fileAdminList.html" (Linux):  此命令直接在终端界面输入可搜索上条命令的结果，输入fileAdminList.html，搜索到相对路径为

​        "WEB-INF/classes/views/modules/fileadmin/fileAdminFolderSelect.html"，用于单独解压此文件。

3. jar -xvf  web.war   WEB-INF/classes/views/modules/fileadmin/fileAdminFolderSelect.html  :  把这个文件解压出来，路径就是以当前目录为根路径./WEB-INF/classes/.....

4.  把修改好的文件替换上面目录中的同名文件fileAdminFolderSelect.html

5.  jar -uvf0   web.war  WEB-INF/classes/views/modules/fileadmin/fileAdminFolderSelect.html  :  把已经替换好的文件再打包到web.war中

   至此实现增量替换效果

   参考：https://blog.csdn.net/jzl110/article/details/80263086